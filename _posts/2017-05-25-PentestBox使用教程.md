---
layout: post
title: "PentestBox使用教程"
date: 2017-05-25
description: "PentestBox"
tag: 安全工具
---

## 1.介绍
<b>PentestBox</b>:渗透测试盒子
顾名思义，这是一个渗透工具包，但是不同于绝大多数国内xx工具包的是，这里集成的大都是Linux下的工具,Kali Linux上面的常用的很多工具这里面也都集成了。

PentestBox[官网](https://pentestbox.org/zh/)

![](/images/2017-05-25/01.png)

官方的介绍如下：

PentestBox是一款Windows平台下预配置的便携式开源渗透测试环境

为什么又有一个渗透测试环境？

PentestBox不同于运行在虚拟机或者双启动环境的Linux渗透测试发行版。

它打包了所有的安全工具，并且可以在Windows系统中原生地运行，有效地降低了对虚拟机或者双启动环境的需求。

我们发现超过50%的渗透测试发行版是运行在Windows系统下的虚拟机程序中，这激发我们创造了它。

## 2.安装

官网提示：按照带有metasploit 的版本的时候得关闭windows自带的防火墙,因为metasploit生成的攻击载荷 对于 windows的安全来说 是个威胁。

1)Windows7直接在控制面板里面 关闭防火墙即可

![](/images/2017-05-25/02.png)

![](/images/2017-05-25/03.png)

2)Windows 10的话，除了关闭上述的防火墙 还得关闭 Windows Defender

在windows 自带的 设置–更新和安全–Windows Defender 中关闭。

![](/images/2017-05-25/04.png)

注意：如果没有关闭防火墙的话，PentestBox安装的过程中释放的文件 会直接被 防火墙悄悄的干掉，如果这样的话就非常的尴尬了，所以 为了方便，建议开始的时候直接关闭防火墙。

直接运行文件 选择安装的文件位置路径，即可安装，安装其实就是文件的释放，最后整个文件夹大小为4.55GB左右

![](/images/2017-05-25/05.png)

所以我们可以直接 把PentestBox安装在移动硬盘或者U盘中，这样就打造了移动渗透工具的平台了，在任意的windows系统上运行，这就比Kali的Live U盘要方便许多

## 3.基本文件结构

PentestBox共5个文件夹,2个库文件，一个bat批处理和一个exe启动程序。
bat和exe都可以启动PentestBox。

base文件夹：

![](/images/2017-05-25/06.png)

里面放了一些工具需要用到的环境变量文件，如：python 、jdk等

bin文件夹：

![](/images/2017-05-25/07.png)

里面的工具基本上足够满足日常的渗透测试要求了

![](/images/2017-05-25/08.png)

## 4.基本安装

### 4.1软件安装

终端下输入：toolsmanager

打开工具管理器，在这里可以 安装/升级/卸载 软件

首先，它会从GitHub的信息库自动更新，然后会显示菜单。如果没有互联网连接，脚本会等待一段时间，然后显示菜单。如下图：

![](/images/2017-05-25/09.png)

可以通过选择编号进入相关的模块。例如，如果我选择了Web应用程序类别，然后按10，它会显示：

![](/images/2017-05-25/10.png)

在这里面 我们就可以安装 这里面列出的工具。

现在，如果你想安装imagejs

然后键入install imagejs

它会安装它。安装后，重启 PentestBox，你所安装的工具会生效。

可以用toolsmanager安装的软件列表，具体见[这里](http://modules.pentestbox.com)

![](/images/2017-05-25/11.png)

### 4.3软件更新

安装软件就酱紫了，如果要更新的话，这里直接输入编号 11

Update all installed Modules 这里就开始更新已经安装的工具了：

![](/images/2017-05-25/12.png)

PentestBox是一个开源项目，让在PentestBox使用的所有文件都存在于它的Github上库。

终端下输入：update 从它的Github上库，如果有任何更改，然后显示菜单将先进行自我更新。如果没没有互联网连接，脚本会等待一段时间，然后显示菜单。

![](/images/2017-05-25/13.png)

### 4.3软件卸载

在toolsmanager 的软件目录里面 我们现在想卸载已经安装过的软件的话，直接键入uninstall + 软件名

假如这里我们想卸载 xssless，然后键入uninstall xssless，这样就会卸载 xssless

![](/images/2017-05-25/14.png)

### 4.4键盘快捷键

```
CTRL + T ：要打开新的标签页
CTRL + C ：要关闭脚本/程序运行
CTRL + w ：这将关闭当前活动的控制台
ALT +Enter ：Pentestbox 会去全屏
```

### 4.5安装后的调试

因为是国外开源项目的原因，有些配置不符合我们国内的本土风情，举个例子：

PentestBox 面封装的atom 编辑器是无法输入汉语的，而且插件也会出现一些问题，比如minimap等得重新配置。

解决方法：将自己原来的atom安装的文里件夹替换PentestBox里面的atom即可。

![](/images/2017-05-25/15.png)

PentestBox封装Burpsuite的是Free版本的，功能上自然比不上 国内的专业破解版的

Burpsuite 
解决方法:把专业版破解版的burpsuite替换进去，并重命名 即可。

![](/images/2017-05-25/16.png)

## 5添加自己的工具

很多情况下自己的工具 toolsmanager或默认PentestBox未安装。可以按照下面的指南 来手动添加自己的工具：

需要做两件事情：

1.下载/克隆工具文，
2.设置别名

别名是基本上是需要PentestBox控制台通过，例如终端命令的SqlMap是一个别名访问sqlmap。

### 7.1基于Python的工具

首先复制文件到 C:/PentestBox/bin/customtools/下

添加一个别名:编辑customaliases文件 位于/PentestBox/bin/customtools/文件夹下。

![](/images/2017-05-25/17.png)

例如，如果你需要添加一个别名hello的工具，那么它的别名是 hello=python “%pentestbox_ROOT%\bin\customtools\Hello.py” $*
上述行添加到customaliases并保存文件 复制到文件夹下：

![](/images/2017-05-25/18.png)

然后编辑 customaliases文件

![](/images/2017-05-25/19.png)

重启你的 PentestBox ，即可生效

![](/images/2017-05-25/20.png)

### 7.2基于exe的工具

1.下载/克隆工具文件。

2.设置别名 方法同上， 只是别名这里 设置的格式为：tool=”%pentestbox_ROOT%\bin\customtools\tool.exe” $*

举例：我们添加个经典的 小葵解密工具

![](/images/2017-05-25/21.png)

编辑 customaliases文件

![](/images/2017-05-25/22.png)

效果如下：

![](/images/2017-05-25/23.png)

### 7.3基于Ruby的工具和Java的工具

语法格式:

Java ：tool=start javaw -jar 
“%pentestbox_ROOT%\bin\customtools\tool.jar” $*
Ruby : wpscan=ruby “%pentestbox_ROOT%\bin\customtools\wpscan\wpscan.rb” $*

在PentestBox 中添加自己的Java 和 Ruby工具，方法的原理是一样的，只是在编辑 customaliases文件 的时候，语法格式有点区别，Java 和 Ruby 的工具格式 参考上面的格式。

## 8.通过网络共享PentestBox

考虑你想要在你的办公室，实验室等使用多台计算机上PentestBox喜欢而不是在每个计算机上安装PentestBox的环境中，你可以只安装一台计算机上，共享该文件夹作为一个驱动器上的其他计算机在同一个网络。

![](/images/2017-05-25/24.png)

更改读取权限读/写，并单击共享。

![](/images/2017-05-25/25.png)

![](/images/2017-05-25/26.png)

现在在局域网的其他电脑上的的 资源管理器 中的 网络 可以看到共享的文件夹

![](/images/2017-05-25/27.png)

![](/images/2017-05-25/28.png)

最后，你可以像你所使用的电脑上安装使用PentestBox。




资料来源：www.sqlsec.com/2016/pentestbox.html